<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelurahan Amparita</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome untuk ikon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts - Montserrat -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- D3.js for charts -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        /* Mengatur font-family global ke Montserrat */
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f7f9fc;
            color: #334155;
        }

        /* Keyframes untuk animasi modal */
        @keyframes modal-in {
            from {
                transform: scale(0.95) translateY(20px);
                opacity: 0;
            }
            to {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        /* Menerapkan animasi ke modal */
        .animate-modal-in {
            animation: modal-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Keyframes untuk animasi hero section */
        @keyframes fade-in-up {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in-up {
            animation: fade-in-up 0.8s ease-out forwards;
        }

        /* Mengatur warna overlay hero */
        .hero-overlay {
            background-color: rgba(28, 69, 50, 0.7); /* Warna hijau tua semi-transparan */
        }

        /* Keyframes untuk animasi slide-down dan bouncing */
        @keyframes slide-down {
            0% {
                opacity: 0;
                transform: translateY(-50px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        .animate-slide-down {
            animation: slide-down 0.5s ease-out forwards;
        }

        .animate-bounce-custom {
            animation: bounce 2s infinite;
        }

        /* Hide scrollbar for Potensi Desa section */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }

        /* Custom scrollbar for draggable sections */
        .draggable-scroll {
            cursor: grab;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch; /* For smoother scrolling on iOS */
        }

        .draggable-scroll:active {
            cursor: grabbing;
        }

        /* Custom responsive grid for detail cards */
        .flexible-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem; /* Increased gap for modern look */
        }

        /* Card hover effect */
        .card-hover-effect {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card-hover-effect:hover {
            transform: translateY(-8px); /* More pronounced lift */
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15); /* Stronger shadow */
        }

        /* Chart section animation */
        .chart-section {
            opacity: 0;
            transform: translateY(20px);
            animation: fade-in-up 0.8s ease-out forwards;
        }
        .chart-section.delay-100 { animation-delay: 0.1s; }
        .chart-section.delay-200 { animation-delay: 0.2s; }
        .chart-section.delay-300 { animation-delay: 0.3s; }

        /* General animation for elements */
        .animate-fade-in {
            opacity: 0;
            animation: fade-in-up 0.8s ease-out forwards;
        }
        .animate-fade-in.delay-100 { animation-delay: 0.1s; }
        .animate-fade-in.delay-200 { animation-delay: 0.2s; }
        .animate-fade-in.delay-300 { animation-delay: 0.3s; }

        /* Modernized section titles */
        .section-title {
            position: relative;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            font-size: 2.5rem; /* Larger font */
            font-weight: 800; /* Extra bold */
            color: #1C4532; /* Darker green for emphasis */
        }

        .section-title::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 80px; /* Wider underline */
            height: 4px; /* Thicker underline */
            background-color: #2B643B; /* Accent color */
            border-radius: 2px;
        }

        /* Sub-section titles */
        .sub-section-title {
            font-size: 2rem; /* Slightly smaller than main title */
            font-weight: 700; /* Bold */
            color: #1A3F2A; /* Consistent green accent */
            margin-top: 2.5rem; /* More space above */
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 0.3rem;
        }

        .sub-section-title::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 50px; /* Shorter underline */
            height: 3px; /* Thinner underline */
            background-color: #1A3F2A; /* Consistent green accent */
            border-radius: 1.5px;
        }

        /* Card styling adjustments */
        .modern-card {
            background-color: #ffffff; /* White background */
            padding: 1.5rem;
            border-radius: 1rem; /* More rounded corners */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08); /* Soft shadow */
            border: none; /* Remove default border */
            display: flex;
            align-items: center;
        }

        .modern-card i {
            font-size: 3rem; /* Larger icons */
            color: #1A3F2A; /* Consistent green accent for icons */
            margin-right: 1.25rem;
        }

        .modern-card p:first-of-type {
            font-size: 0.9rem; /* Smaller descriptive text */
            color: #6B7280; /* Grayer text */
            margin-bottom: 0.25rem;
        }

        .modern-card p:last-of-type {
            font-size: 2.25rem; /* Larger, bolder numbers */
            font-weight: 700;
            color: #1C4532; /* Dark green for numbers */
        }

        .modern-card button {
            background-color: #2B643B; /* Darker green button */
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .modern-card button:hover {
            background-color: #1A3F2A;
            transform: translateY(-2px);
        }

        /* Chart container styling */
        .chart-container-modern {
            background-color: #ffffff;
            padding: 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            border: none;
        }

        /* New styles for Data Monografi Section */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            animation: fade-in-up 0.8s ease-out forwards;
        }

        .data-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .data-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .data-card i {
            color: #1A3F2A; /* Consistent green accent for icons */
        }
        .data-card p:first-of-type {
            color: #1A3F2A; /* Consistent green for numbers */
        }

        /* Google Maps Placeholder Styling */
        .map-placeholder {
            width: 100%;
            padding-top: 100%; /* Makes the height equal to the width */
            position: relative;
            height: 0; /* Important for padding-top trick */
            background-color: #e0e0e0; /* Light gray background */
            display: flex; /* Still need flex for content centering if any */
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 1.5rem;
            border-radius: 1rem;
            overflow: hidden; /* Ensure image fits */
        }
        .map-placeholder img {
            position: absolute; /* Position image absolutely within the padded container */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; /* Cover the area, crop if necessary */
        }

        /* Styling for horizontal scroll cards in Sarana dan Prasarana */
        .sarana-prasarana-card {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            width: 280px; /* Fixed width for cards in horizontal scroll */
            flex-shrink: 0; /* Prevent cards from shrinking */
        }

        .sarana-prasarana-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .sarana-prasarana-card img {
            width: 100%;
            height: 160px; /* Fixed height for images in cards */
            object-fit: cover;
            border-top-left-radius: 1rem;
            border-top-right-radius: 1rem;
        }

        .sarana-prasarana-card .card-content {
            padding: 1.5rem;
        }

        .sarana-prasarana-card h3 {
            font-weight: 700;
            font-size: 1.25rem; /* Larger title for cards */
            color: #1C4532;
            margin-bottom: 0.5rem;
        }

        .sarana-prasarana-card p {
            font-size: 0.95rem;
            color: #6B7280;
            margin-bottom: 1rem;
        }

        .sarana-prasarana-card button {
            background-color: #2B643B;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            width: 100%; /* Full width button */
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .sarana-prasarana-card button:hover {
            background-color: #1A3F2A;
            transform: translateY(-2px);
        }

        /* Styling for slide buttons */
        .slide-button {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 9999px; /* Full rounded */
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .slide-button:hover {
            background-color: rgba(0, 0, 0, 0.7);
            transform: translateY(-50%) scale(1.05);
        }

        .slide-button.left {
            left: -20px; /* Adjust as needed for spacing */
        }

        .slide-button.right {
            right: -20px; /* Adjust as needed for spacing */
        }

        /* Carousel Detail Modal specific styling */
        #carouselDetailModal .carousel-slide-content {
            padding: 1rem; /* Added padding for text content */
        }
        #carouselDetailModal .carousel-slide-content p.text-xl {
            font-size: 1.5rem; /* Slightly larger for main name */
            font-weight: 700;
            color: #1C4532; /* Dark green for emphasis */
        }
        #carouselDetailModal .carousel-slide-content p.text-gray-600 {
            font-size: 1.1rem; /* Clearer address/description */
            color: #6B7280;
            margin-top: 0.5rem;
        }

        /* Category List Modal specific styling */
        #categoryListModal .modal-content-area {
            padding: 1rem; /* Added padding for overall content */
        }
        #categoryListModal ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        #categoryListModal li {
            margin-bottom: 0.75rem; /* Spacing between list items */
        }
        #categoryListModal li span {
            padding: 0.5rem 0; /* Padding for text inside list items */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <!-- Header/Navbar -->
    <header class="fixed top-0 left-0 right-0 z-[100] bg-white shadow-lg py-4">
        <nav class="container mx-auto flex items-center justify-between px-4">
            <!-- Logo, Nama Desa, dan Menu Navigasi (kiri) -->
            <div class="flex items-center space-x-6">
                <!-- Logo berupa gambar -->
                <img src="https://placehold.co/40x40/1C4532/FFFFFF?text=Logo" alt="Logo Kelurahan Amparita" class="h-10 w-10 rounded-full">
                <h1 class="text-xl md:text-2xl font-extrabold text-[#1C4532]">Kelurahan Amparita</h1>
                <!-- Menu Navigasi -->
                <ul class="hidden lg:flex items-center space-x-4 ml-6"> <!-- Added ml-6 for spacing -->
                    <li class="group relative">
                        <a class="relative z-10 font-semibold px-4 py-2 rounded-lg hover:bg-[#1C4532] hover:text-white transition-all duration-300" href="index.html">Beranda</a>
                    </li>
                    <li class="group relative">
                        <a class="relative z-10 font-semibold px-4 py-2 rounded-lg hover:bg-[#1C4532] hover:text-white transition-all duration-300" href="profile.html">
                            Profil Kelurahan
                        </a>
                    </li>
                    <li class="group relative">
                        <a class="relative z-10 font-semibold px-4 py-2 rounded-lg bg-[#1C4532] text-white" href="infografis.html">Infografis</a>
                    </li>
                    <li class="group relative">
                        <a class="relative z-10 font-semibold px-4 py-2 rounded-lg hover:bg-[#1C4532] hover:text-white transition-all duration-300" href="umkm.html">UMKM</a>
                    </li>
                    <li class="group relative">
                        <a class="relative z-10 font-semibold px-4 py-2 rounded-lg hover:bg-[#1C4532] hover:text-white transition-all duration-300" href="galeri.html">Galeri</a></li>
                    <li class="group relative">
                        <a class="relative z-10 font-semibold px-4 py-2 rounded-lg text-gray-800 hover:bg-[#1C4532] hover:text-white transition-all duration-300" href="tentang.html">Tentang</a>
                    </li>
                </ul>
            </div>
            <!-- Tombol Kontak Desa (kanan) -->
            <button id="openContactModalBtn" class="hidden lg:inline-flex items-center justify-center bg-[#2B643B] text-white font-bold py-2 px-6 rounded-full shadow-lg hover:bg-[#1A3F2A] transition-all duration-300 transform hover:scale-105 group text-sm">
                Kontak Desa
                <i class="fas fa-phone-alt ml-2 group-hover:rotate-6 transition-transform duration-200"></i>
            </button>
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button" class="lg:hidden text-gray-800 focus:outline-none">
                <i class="fas fa-bars text-2xl"></i>
            </button>
        </nav>
    </header>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-[90] hidden"></div>
    <div id="mobile-menu" class="fixed top-0 right-0 h-full w-64 bg-white shadow-lg z-[95] transform translate-x-full transition-transform duration-300 ease-in-out">
        <div class="p-6">
            <button id="close-mobile-menu" class="absolute top-4 right-4 text-gray-600 hover:text-gray-900">
                <i class="fas fa-times text-2xl"></i>
            </button>
            <img src="https://placehold.co/60x60/1C4532/FFFFFF?text=Logo" alt="Logo Kelurahan Amparita" class="h-16 w-16 rounded-full mx-auto mb-6">
            <h2 class="text-xl font-extrabold text-[#1C4532] text-center mb-8">Kelurahan Amparita</h2>
            <ul class="space-y-4">
                <li><a class="block font-semibold px-4 py-2 rounded-lg text-gray-800 hover:bg-[#1C4532] hover:text-white transition-all duration-300" href="#">Beranda</a></li>
                <li><a class="block font-semibold px-4 py-2 rounded-lg text-gray-800 hover:bg-[#1C4532] hover:text-white transition-all duration-300" href="profile.html">Profil Kelurahan</a></li>
                <li><a class="block font-semibold px-4 py-2 rounded-lg text-gray-800 hover:bg-[#1C4532] hover:text-white transition-all duration-300" href="infografis.html">Infografis</a></li>
                <li><a class="block font-semibold px-4 py-2 rounded-lg text-gray-800 hover:bg-[#1C4532] hover:text-white transition-all duration-300" href="umkm.html">UMKM</a></li>
                <li><a class="block font-semibold px-4 py-2 rounded-lg text-gray-800 hover:bg-[#1C4532] hover:text-white transition-all duration-300" href="galeri.html">Galeri</a></li>
                <li><a class="block font-semibold px-4 py-2 rounded-lg text-gray-800 hover:bg-[#1C4532] hover:text-white transition-all duration-300" href="tentang.html">Tentang</a></li>
                <li>
                    <button id="openContactModalBtnMobile" class="w-full bg-[#2B643B] text-white font-bold py-2 px-6 rounded-full shadow-lg hover:bg-[#1A3F2A] transition-all duration-300 transform hover:scale-105 group text-sm mt-4">
                        Kontak Desa
                        <i class="fas fa-phone-alt ml-2 group-hover:rotate-6 transition-transform duration-200"></i>
                    </button>
                </li>
            </ul>
        </div>
    </div>

    <div class="relative pt-24 md:pt-32 flex-grow"> <!-- Adjusted padding top for fixed header -->
        <!-- Data Monografi Section -->
        <div class="px-4 py-8 md:px-8 md:py-10 bg-gradient-to-br from-[#F0FFF0] to-[#E0FFE0] text-gray-800 rounded-xl shadow-2xl my-12 text-center animate-on-scroll">
            <h1 class="text-3xl md:text-5xl font-extrabold text-[#1A3F2A] mb-10 leading-tight">Data Monografi Desa</h1>
            <div class="grid grid-cols-2 md:grid-cols-5 gap-8 max-w-6xl mx-auto">
                <div class="data-card text-center flex flex-col items-center p-4 bg-white rounded-lg shadow-md">
                    <i class="fas fa-map-marker-alt text-5xl mb-3"></i>
                    <p class="text-4xl md:text-5xl font-extrabold">3</p>
                    <p class="text-gray-700 text-lg font-medium">Dusun</p>
                </div>
                <div class="data-card text-center flex flex-col items-center p-4 bg-white rounded-lg shadow-md">
                    <i class="fas fa-users text-5xl mb-3"></i>
                    <p class="text-4xl md:text-5xl font-extrabold">4.425</p>
                    <p class="text-gray-700 text-lg font-medium">Jiwa Penduduk</p>
                </div>
                <div class="data-card text-center flex flex-col items-center p-4 bg-white rounded-lg shadow-md">
                    <i class="fas fa-ruler-combined text-5xl mb-3"></i>
                    <p class="text-4xl md:text-5xl font-extrabold">393 Km<sup>2</sup></p>
                    <p class="text-gray-700 text-lg font-medium">Luas Wilayah</p>
                </div>
                <div class="data-card text-center flex flex-col items-center p-4 bg-white rounded-lg shadow-md">
                    <i class="fas fa-home text-5xl mb-3"></i>
                    <p class="text-4xl md:text-5xl font-extrabold">1.238</p>
                    <p class="text-gray-700 text-lg font-medium">Kepala Keluarga</p>
                </div>
                <div class="data-card text-center flex flex-col items-center p-4 bg-white rounded-lg shadow-md">
                    <i class="fas fa-list-ol text-5xl mb-3"></i>
                    <p class="text-4xl md:text-5xl font-extrabold">12</p>
                    <p class="text-gray-700 text-lg font-medium">Rukun Keluarga (RK)</p>
                </div>
            </div>
            <div class="mt-12">
                <button class="inline-flex items-center bg-[#2B643B] text-white font-bold py-4 px-10 rounded-full shadow-xl hover:bg-[#1A3F2A] transition-colors duration-300 transform hover:scale-105 group text-lg" id="openMonographyModal">
                    Lihat Detail Monografi
                    <i class="fas fa-arrow-right ml-3 group-hover:translate-x-1 transition-transform duration-200"></i>
                </button>
            </div>
        </div>

        <!-- Section: Statistik Demografi Penduduk -->
        <div class="container mx-auto px-4 py-8 md:px-8 md:py-12 bg-white rounded-lg shadow-xl my-8">
            <div class="mb-8">
                <h1 class="section-title">Statistik Demografi Penduduk</h1>
                <p class="text-xl text-gray-600 mt-2 mb-8">Data pekerjaan dan jenis kelamin masyarakat Desa Bontomarannu.</p>
            </div>

                
                <div class="chart-section animate-fade-in delay-100 chart-container-modern">
                    <h2 class="sub-section-title">Berdasarkan Jenis Kelamin</h2>
                    <div id="jenis-kelamin-chart-container" class="flex justify-center items-center w-full min-h-[300px] sm:min-h-[400px] relative z-10">
                        <!-- D3.js chart will be rendered here -->
                    </div>
                </div>
            </div> 
        </div>

        <div class="container mx-auto px-4 py-8 md:px-8 md:py-12 bg-white rounded-lg shadow-xl my-8">
            <!-- Section: Sarana dan Prasarana -->
            <div class="mb-8">
                <h1 class="section-title">Sarana dan Prasarana</h1>
            </div>

            <!-- Horizontal scroll container for all sarana/prasarana items -->
            <div class="relative w-full">
                <div id="sarana-prasarana-scroll-container" class="flex flex-nowrap overflow-x-auto gap-6 pb-4 scrollbar-hide">
                    <!-- Kantor Desa Card -->
                    <div class="sarana-prasarana-card cursor-pointer" onclick="showCarouselDetail('Kantor Desa', '', [{url: 'images/kantor.jpg', name: 'Gedung Kantor Desa', address: 'Dusun Tulekko', description: 'Kantor desa adalah pusat administrasi dan pelayanan masyarakat di Kelurahan Amparita. Gedung ini dilengkapi dengan fasilitas dasar untuk mendukung kegiatan pemerintahan desa.'}])">
                        <img src="images/kantor.jpg" alt="Kantor Desa">
                        <div class="card-content">
                            <h3>Kantor Desa</h3>
                            <p>1 Unit</p>
                            <button>Detail</button>
                        </div>
                    </div>

                    <!-- Sarana Kesehatan - POSKESDES Card -->
                    <div class="sarana-prasarana-card cursor-pointer" onclick="showCarouselDetail('POSKESDES', '', [{url:'https://placehold.co/600x400/1A3F2A/FFFFFF?text=Poskesdes', name: 'Poskesdes Kita', address: 'Dusun Tulekko', description: 'POSKESDES (Pos Kesehatan Desa) menyediakan layanan kesehatan dasar dan promosi kesehatan bagi warga desa, berperan penting dalam menjaga kesehatan masyarakat.'}])">
                        <img src="https://placehold.co/600x400/1A3F2A/FFFFFF?text=POSKESDES" alt="POSKESDES">
                        <div class="card-content">
                            <h3>POSKESDES</h3>
                            <p>1 Unit</p>
                            <button>Detail</button>
                        </div>
                    </div>

    <!-- Footer Section -->
    <footer class="bg-green-950 text-white px-4 py-8 md:px-8 md:py-10 mt-12 shadow-inner">
        <div class="container mx-auto">
            <div class="flex flex-col items-center">
                <div class="text-center">
                    <h1 class="text-xl md:text-2xl text-white font-bold">Kelurahan Amparita</h1>
                    <p class="text-sm text-gray-300 mt-1">Kec. Bontotiro, Kab. Bulukumba, Sulawesi Selatan</p>
                </div>
            </div>
            <div class="text-center mt-6 pt-6 border-t border-gray-700">
                <p class="text-xs text-gray-400">
                    © 2025 Kelurahan Amparita - All rights reserved
                </p>
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <!-- Contact Modal -->
    <div id="contactModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[200] hidden">
        <div class="bg-white p-8 rounded-lg shadow-xl max-w-md w-full animate-modal-in relative">
            <button class="absolute top-4 right-4 text-gray-600 hover:text-gray-900 text-2xl" onclick="closeContactModal()">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="text-3xl font-bold text-[#1C4532] mb-6 text-center">Kontak Kami</h2>
            <div class="space-y-4 text-gray-700">
                <p><i class="fas fa-map-marker-alt mr-3 text-[#2B643B]"></i> Jl. Utama Desa Bontomarannu, Kec. Bontotiro, Kab. Bulukumba</p>
                <p><i class="fas fa-phone mr-3 text-[#2B643B]"></i> (0413) 1234567</p>
                <p><i class="fas fa-envelope mr-3 text-[#2B643B]"></i> info.amparita@email.com</p>
                <p><i class="fab fa-whatsapp mr-3 text-[#2B643B]"></i> +62 812-3456-7890</p>
            </div>
            <div class="mt-8 text-center">
                <button class="bg-[#2B643B] text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-[#1A3F2A] transition-all duration-300" onclick="closeContactModal()">Tutup</button>
            </div>
        </div>
    </div>

    <!-- Carousel Detail Modal -->
    <div id="carouselDetailModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[200] hidden">
        <div class="bg-white p-6 rounded-lg shadow-xl max-w-3xl w-full mx-4 animate-modal-in relative">
            <button class="absolute top-4 right-4 text-gray-600 hover:text-gray-900 text-2xl" onclick="closeCarouselDetailModal()">
                <i class="fas fa-times"></i>
            </button>
            <h2 id="carouselTitle" class="text-3xl font-bold text-[#1C4532] mb-6 text-center"></h2>
            <div class="relative">
                <div id="carouselContainer" class="overflow-hidden rounded-lg">
                    <!-- NEW: Inner wrapper for slides -->
                    <div id="carouselInnerWrapper" class="flex flex-nowrap transition-transform duration-500 ease-in-out">
                        <!-- Carousel slides will be injected here -->
                    </div>
                </div>
                <button id="prevSlideCarousel" class="absolute top-1/2 left-4 -translate-y-1/2 bg-gray-800 text-white p-3 rounded-full opacity-75 hover:opacity-100 transition-opacity duration-200">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button id="nextSlideCarousel" class="absolute top-1/2 right-4 -translate-y-1/2 bg-gray-800 text-white p-3 rounded-full opacity-75 hover:opacity-100 transition-opacity duration-200">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div id="carouselDots" class="flex justify-center mt-4 space-x-2">
                <!-- Dots will be injected here -->
            </div>
            <div class="mt-6 text-center">
                <button class="bg-[#2B643B] text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-[#1A3F2A] transition-all duration-300" onclick="closeCarouselDetailModal()">Tutup</button>
            </div>
        </div>
    </div>

    <!-- Category List Modal -->
    <div id="categoryListModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[200] hidden">
        <div class="bg-white p-6 rounded-lg shadow-xl max-w-xl w-full mx-4 animate-modal-in relative">
            <button class="absolute top-4 right-4 text-gray-600 hover:text-gray-900 text-2xl" onclick="closeCategoryListModal()">
                <i class="fas fa-times"></i>
            </button>
            <h2 id="categoryListTitle" class="text-3xl font-bold text-[#1C4532] mb-6 text-center"></h2>
            <div id="categoryListImageContainer" class="mb-4 flex justify-center hidden">
                <img id="categoryListImage" src="" alt="Category Image" class="rounded-lg shadow-md max-h-64 object-cover w-full">
            </div>
            <ul id="categoryListItems" class="space-y-3 text-lg text-gray-700">
                <!-- List items will be injected here -->
            </ul>
            <div class="mt-8 text-center">
                <button class="bg-[#2B643B] text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-[#1A3F2A] transition-all duration-300" onclick="closeCategoryListModal()">Tutup</button>
            </div>
        </div>
    </div>

    <script>
        // --- Mobile Menu Logic ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const closeMobileMenuButton = document.getElementById('close-mobile-menu');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.remove('translate-x-full');
            mobileMenu.classList.add('translate-x-0');
            mobileMenuOverlay.classList.remove('hidden');
        });

        closeMobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.remove('translate-x-0');
            mobileMenu.classList.add('translate-x-full');
            mobileMenuOverlay.classList.add('hidden');
        });

        mobileMenuOverlay.addEventListener('click', () => {
            closeMobileMenuButton.click(); // Simulate click on close button
        });

        // --- Contact Modal Logic ---
        const contactModal = document.getElementById('contactModal');
        const openContactModalBtn = document.getElementById('openContactModalBtn');
        const openContactModalBtnMobile = document.getElementById('openContactModalBtnMobile');

        function openContactModal() {
            contactModal.classList.remove('hidden');
            closeMobileMenuButton.click(); // Close mobile menu if open
        }

        function closeContactModal() {
            contactModal.classList.add('hidden');
        }

        openContactModalBtn.addEventListener('click', openContactModal);
        openContactModalBtnMobile.addEventListener('click', openContactModal);

        // --- Carousel Detail Modal Logic ---
        const carouselDetailModal = document.getElementById('carouselDetailModal');
        const carouselTitle = document.getElementById('carouselTitle');
        const carouselContainer = document.getElementById('carouselContainer');
        const carouselInnerWrapper = document.getElementById('carouselInnerWrapper'); // Get the new inner wrapper
        const prevSlideCarouselBtn = document.getElementById('prevSlideCarousel');
        const nextSlideCarouselBtn = document.getElementById('nextSlideCarousel');
        const carouselDotsContainer = document.getElementById('carouselDots');

        let currentSlideIndex = 0;
        let currentSlidesData = [];

        function showCarouselDetail(title, initialValue, slides) {
            carouselTitle.textContent = title;
            currentSlidesData = slides;
            currentSlideIndex = 0;
            renderCarouselSlides();
            carouselDetailModal.classList.remove('hidden');
        }

        function renderCarouselSlides() {
            carouselInnerWrapper.innerHTML = ''; // Clear inner wrapper
            carouselDotsContainer.innerHTML = '';

            currentSlidesData.forEach((slide, index) => {
                const slideDiv = document.createElement('div');
                slideDiv.className = `w-full flex-shrink-0 text-center`; // Simplified class for individual slide
                slideDiv.innerHTML = `
                    <img src="${slide.url}" alt="${slide.name}" class="w-full h-64 md:h-96 object-cover rounded-lg shadow-md mx-auto">
                    <div class="carousel-slide-content mt-4">
                        <p class="text-xl font-semibold">${slide.name}</p>
                        <p class="text-gray-600">${slide.address}</p>
                        ${slide.description ? `<p class="text-gray-500 text-sm mt-2">${slide.description}</p>` : ''}
                    </div>
                `;
                carouselInnerWrapper.appendChild(slideDiv); // Append to inner wrapper

                const dot = document.createElement('span');
                dot.className = `block w-3 h-3 rounded-full bg-gray-400 cursor-pointer transition-colors duration-200 ${index === currentSlideIndex ? '!bg-[#1A3F2A]' : ''}`;
                dot.addEventListener('click', () => {
                    currentSlideIndex = index;
                    updateCarouselVisibility();
                });
                carouselDotsContainer.appendChild(dot);
            });

            // Adjust container height to match the current slide's image height
            const firstImage = carouselInnerWrapper.querySelector('img');
            if (firstImage) {
                firstImage.onload = () => { // Ensure image is loaded before setting height
                    carouselContainer.style.height = `${firstImage.offsetHeight}px`;
                    updateCarouselVisibility(); // Update visibility after image loads to ensure correct initial position
                };
                if (firstImage.complete) { // If image is already loaded
                    carouselContainer.style.height = `${firstImage.offsetHeight}px`;
                }
            }
            updateCarouselVisibility(); // Initial positioning
        }

        function updateCarouselVisibility() {
            // Apply transform to the inner wrapper to slide all content
            carouselInnerWrapper.style.transform = `translateX(-${currentSlideIndex * 100}%)`;

            const dots = carouselDotsContainer.querySelectorAll('span');
            dots.forEach((dot, index) => {
                if (index === currentSlideIndex) {
                    dot.classList.add('!bg-[#1A3F2A]');
                } else {
                    dot.classList.remove('!bg-[#1A3F2A]');
                }
            });
        }

        prevSlideCarouselBtn.addEventListener('click', () => {
            currentSlideIndex = (currentSlideIndex - 1 + currentSlidesData.length) % currentSlidesData.length;
            updateCarouselVisibility();
        });

        nextSlideCarouselBtn.addEventListener('click', () => {
            currentSlideIndex = (currentSlideIndex + 1) % currentSlidesData.length;
            updateCarouselVisibility();
        });

        function closeCarouselDetailModal() {
            carouselDetailModal.classList.add('hidden');
        }

        // --- Category List Modal Logic ---
        const categoryListModal = document.getElementById('categoryListModal');
        const categoryListTitle = document.getElementById('categoryListTitle');
        const categoryListImageContainer = document.getElementById('categoryListImageContainer');
        const categoryListImage = document.getElementById('categoryListImage');
        const categoryListItems = document.getElementById('categoryListItems');

        function openCategoryListModal(title, imageUrl, items, showImage) {
            categoryListTitle.textContent = title;
            categoryListItems.innerHTML = ''; // Clear previous items

            if (showImage && imageUrl) {
                categoryListImage.src = imageUrl;
                categoryListImageContainer.classList.remove('hidden');
            } else {
                categoryListImageContainer.classList.add('hidden');
            }

            items.forEach(item => {
                const listItem = document.createElement('li');
                listItem.className = 'flex justify-between items-center bg-gray-50 p-3 rounded-lg shadow-sm border border-gray-100';
                listItem.innerHTML = `
                    <span class="font-semibold text-gray-800">${item.name}</span>
                    <span class="text-[#1A3F2A] font-bold">${item.value}</span>
                `;
                // Add description if available
                if (item.description) {
                    const descriptionP = document.createElement('p');
                    descriptionP.className = 'text-gray-500 text-sm mt-1';
                    descriptionP.textContent = item.description;
                    listItem.appendChild(descriptionP);
                    listItem.classList.add('flex-col', 'items-start'); // Adjust layout for description
                }
                categoryListItems.appendChild(listItem);
            });

            categoryListModal.classList.remove('hidden');
        }

        function closeCategoryListModal() {
            categoryListModal.classList.add('hidden');
        }

        // --- Monography Detail Modal Logic ---
        const monographyDetailModal = document.getElementById('monographyDetailModal');
        const openMonographyModalBtn = document.getElementById('openMonographyModal');

        function openMonographyModal() {
            monographyDetailModal.classList.remove('hidden');
        }

        function closeMonographyModal() {
            monographyDetailModal.classList.add('hidden');
        }

        openMonographyModalBtn.addEventListener('click', openMonographyModal);

        // --- D3.js Chart Rendering ---

        // Function to render Pie Chart
        function renderPieChart(containerId, data, titleText) {
            const container = document.getElementById(containerId);
            if (!container) return; // Exit if container not found

            // Clear previous chart
            d3.select(container).select("svg").remove();

            const width = container.clientWidth;
            const height = Math.min(width, 400); // Max height 400px, responsive
            const radius = Math.min(width, height) / 2 - 20; // Adjusted radius

            const svg = d3.select(container)
                .append("svg")
                .attr("viewBox", `0 0 ${width} ${height}`)
                .attr("preserveAspectRatio", "xMidYMid meet")
                .append("g")
                .attr("transform", `translate(${width / 2}, ${height / 2})`);

            const pie = d3.pie()
                .value(d => d.value)
                .sort(null);

            const arc = d3.arc()
                .innerRadius(radius * 0.6) // Donut chart
                .outerRadius(radius);

            const outerArc = d3.arc()
                .innerRadius(radius * 0.9)
                .outerRadius(radius * 0.9);

            const color = d3.scaleOrdinal(d3.schemeCategory10);

            const arcs = svg.selectAll(".arc")
                .data(pie(data))
                .enter()
                .append("g")
                .attr("class", "arc");

            arcs.append("path")
                .attr("d", arc)
                .attr("fill", (d, i) => color(i))
                .attr("stroke", "white")
                .style("stroke-width", "2px")
                .transition()
                .duration(750)
                .attrTween("d", function(d) {
                    const i = d3.interpolate(d.startAngle, d.endAngle);
                    return function(t) {
                        d.endAngle = i(t);
                        return arc(d);
                    };
                });

            // Add hover effects
            arcs.on("mouseover", function(event, d) {
                d3.select(this).select("path")
                    .transition()
                    .duration(200)
                    .attr("d", d3.arc().innerRadius(radius * 0.6).outerRadius(radius * 1.05)); // Slightly enlarge
                d3.select(this).select("text")
                    .transition()
                    .duration(200)
                    .attr("font-size", "1em"); // Make text slightly larger
            })
            .on("mouseout", function(event, d) {
                d3.select(this).select("path")
                    .transition()
                    .duration(200)
                    .attr("d", arc); // Revert size
                d3.select(this).select("text")
                    .transition()
                    .duration(200)
                    .attr("font-size", "0.8em"); // Revert text size
            });

            arcs.append("text")
                .attr("transform", d => `translate(${outerArc.centroid(d)})`)
                .attr("dy", "0.35em")
                .attr("font-size", "0.8em")
                .attr("text-anchor", d => (d.endAngle + d.startAngle) / 2 > Math.PI ? "end" : "start")
                .text(d => `${d.data.label} (${d.data.value}%)`)
                .style("fill", "#333")
                .style("opacity", 0) // Start hidden
                .transition()
                .delay(750) // Appear after animation
                .duration(500)
                .style("opacity", 1);

            // Add a title to the center of the donut
            svg.append("text")
                .attr("text-anchor", "middle")
                .attr("dy", "0.35em")
                .attr("font-size", "1.2em")
                .attr("font-weight", "bold")
                .text(titleText)
                .style("fill", "#333");
        }

        // Data for charts

        const jenisKelaminData = [
            { label: "Laki-laki", value: 2.323 },
            { label: "Perempuan", value: 2.102 }
        ];

        // Render charts on window load and resize
        function initializeCharts() {
            renderPieChart('pekerjaan-chart-container', pekerjaanData, 'Pekerjaan');
            renderPieChart('jenis-kelamin-chart-container', jenisKelaminData, 'Jenis Kelamin');
        }

        window.addEventListener('load', initializeCharts);
        window.addEventListener('resize', initializeCharts);

        // Ensure chart containers are visible for D3 to calculate dimensions
        // This might be needed if they start hidden by default due to animations
        document.querySelectorAll('.chart-section').forEach(el => {
            el.style.opacity = '1';
            el.style.transform = 'translateY(0)';
        });

        // --- Sarana Prasarana Horizontal Scroll Logic ---
        const scrollContainer = document.getElementById('sarana-prasarana-scroll-container');
        const slideLeftBtn = document.getElementById('slideLeftBtn');
        const slideRightBtn = document.getElementById('slideRightBtn');

        // Function to scroll the container
        function scrollSaranaPrasarana(direction) {
            const scrollAmount = 300; // Adjust scroll amount as needed
            if (direction === 'left') {
                scrollContainer.scrollBy({
                    left: -scrollAmount,
                    behavior: 'smooth'
                });
            } else {
                scrollContainer.scrollBy({
                    left: scrollAmount,
                    behavior: 'smooth'
                });
            }
        }

        // Add event listeners for slide buttons
        slideLeftBtn.addEventListener('click', () => scrollSaranaPrasarana('left'));
        slideRightBtn.addEventListener('click', () => scrollSaranaPrasarana('right'));

        // Optional: Hide/Show buttons based on scroll position (more advanced)
        // You would need to add an event listener for 'scroll' on scrollContainer
        // and check scrollLeft and scrollWidth to determine button visibility.

    </script>
</body>
</html>
